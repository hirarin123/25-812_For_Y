<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>ãƒãƒ¼ãƒ€ãƒ¼ãƒŸã‚¹ãƒ†ãƒªãƒ¼RPG</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
html, body { margin:0; padding:0; height:100%; background:#000; font-family:'Yu Gothic',sans-serif; color:#ffeebb; }
.scene { display:none; min-height:100vh; width:100vw; flex-direction:column; align-items:center; justify-content:center; }
.scene.active { display:flex; }
button { font-size:22px; background:#ffe688; color:#502800; font-weight:bold; border-radius:10px; border:none; padding:14px 36px; margin:12px; cursor:pointer; }
.narration { font-size:24px; line-height:1.8; background:#222a; padding:24px; border-radius:14px; max-width:720px; text-align:left; }
.char { opacity:0; filter:blur(2px); display:inline-block; }
.char.show { opacity:1; filter:blur(0); transition: opacity .25s ease, filter .4s ease; }
@keyframes slideRight { 0% { transform: translateX(-100%); opacity:0; } 10% { opacity:1; } 90% { opacity:1; } 100% { transform: translateX(100%); opacity:0; } }
.slide { animation: slideRight 30s linear forwards; }
#audioBar { position:fixed; right:14px; bottom:14px; display:flex; gap:8px; background:#000a; padding:8px 12px; border-radius:12px; }
#soundPrompt { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:linear-gradient(180deg,#0008,#000c); z-index:900; }
#soundPrompt .card { background:#1a1a22; padding:20px; border-radius:14px; text-align:center; }
</style>
</head>
<body>
<div id="intro" class="scene active" style="background:#181818 url('intro_bg.png') center/cover no-repeat;">
  <button id="startAdventureBtn">å†’é™ºã‚’å§‹ã‚ã‚‹</button>
</div>
<div id="story" class="scene" style="background:#000;">
  <div class="narration"><span id="storyText"></span></div>
  <button id="toSlideBtn" style="display:none;">æ¬¡ã¸</button>
</div>
<div id="slideScene" class="scene" style="background:#000;">
  <img id="slideImg" style="max-height:78vh;" />
</div>
<audio id="bgm" src="bgm.mp3" preload="auto" loop></audio>
<div id="audioBar">
  <button id="playPauseBtn">â–¶ å†ç”Ÿ</button>
  <button id="muteBtn">ğŸ”Š ãƒŸãƒ¥ãƒ¼ãƒˆ</button>
</div>
<div id="soundPrompt">
  <div class="card">
    <div class="title">ã‚µã‚¦ãƒ³ãƒ‰ã‚’ã‚ªãƒ³ã«ã—ã¾ã™ã‹ï¼Ÿ</div>
    <div>ãƒ–ãƒ©ã‚¦ã‚¶ã®åˆ¶é™ã§è‡ªå‹•å†ç”Ÿã§ãã¾ã›ã‚“ã€‚<br>ä¸‹ã®ãƒœã‚¿ãƒ³ã§BGMã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚</div>
    <button id="enableSoundBtn" style="margin-top:12px;">â–¶ BGMã‚’å†ç”Ÿ</button>
    <button id="skipSoundBtn" style="margin-top:10px;background:#555;color:#fff;">BGMãªã—ã§é€²ã‚€</button>
  </div>
</div>
  
<script>
const STORY_TEXT = 'ç›®ã‚’è¦šã¾ã™ã¨ã€ã‚ãªãŸã¯è–„æš—ã„è¨ºç™‚æ‰€ã®ãƒ™ãƒƒãƒ‰ã«æ¨ªãŸã‚ã£ã¦ã„ãŸã€‚\nè¦–ç•Œã®å…ˆã«ã¯ã€å„ªã—ã„çœ¼å·®ã—ã® Dr. Sungã€‚\n\nã€Œâ€¦ã“ã®æ‘ã¯ã€ã‚ã‚‹å‡ºæ¥äº‹ã‚’å¢ƒã«é™ã¾ã‚Šè¿”ã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚ã€\nãã®å£°ã¯é™ã‹ã§ã€ã—ã‹ã—æ·±ã„æ‚²ã—ã¿ã‚’å¸¯ã³ã¦ã„ãŸã€‚\n\nã“ã“ã¯ã€ã‹ã¤ã¦ç¥­ã‚Šã¨ç¬‘ã„å£°ã«åŒ…ã¾ã‚Œã¦ã„ãŸå°ã•ãªæ‘ã€‚\nã ãŒä»Šã¯ã€äººå½±ã‚‚ãªãã€é¢¨ãŒè»‹ã‚€éŸ³ã ã‘ãŒéŸ¿ã„ã¦ã„ã‚‹ã€‚\n\nè¨ºç™‚æ‰€ã®æ‰‰ã‚’é–‹ã‘ã‚‹ã¨ã€ä¸€åŒ¹ã®ãƒ‘ã‚°ãŒã“ã¡ã‚‰ã‚’è¦‹ä¸Šã’ã¦ã„ãŸã€‚\né¦–ã«ã¯å¤ã³ãŸéµã€‚ãã®åã¯ ãƒ«ã‚·ã‚¢ã€‚\nãã®ç³ã«ã¯ã€ã‚ãªãŸã«ä½•ã‹ã‚’è¨´ãˆã‚‹å¼·ã„å…‰ãŒå®¿ã£ã¦ã„ãŸã€‚\n\nãƒ«ã‚·ã‚¢ãŒæ­©ãå‡ºã™ã€‚è¶³å…ƒã‹ã‚‰ã€ãã—ã‚ƒãã—ã‚ƒã«ãªã£ãŸç´™åˆ‡ã‚ŒãŒèˆã„è½ã¡ãŸã€‚\nãã“ã«ã¯éœ‡ãˆã‚‹ç­†è·¡ã§ã“ã†è¨˜ã•ã‚Œã¦ã„ã‚‹ã€‚\n\nã€Œå®ã‚’è¦‹ã¤ã‘ãŸè€…ã¯ã€ã“ã®æ‘ã®çœŸå®Ÿã‚’çŸ¥ã‚‹ã€\n\nå™‚ã«ã‚ˆã‚Œã°ã€â€œãƒ´ã‚§ãƒ«ãƒŸãƒªã‚ªãƒ³â€ã¨å‘¼ã°ã‚Œã‚‹è€…ãŒç¾ã‚Œã€æ‘ã‚’æ»…ã¼ã™å‘ªæ–‡ã‚’æ”¾ã¨ã†ã¨ã—ãŸã€‚\nãã®å‘ªæ–‡ã‚’å°ã˜ã‚‹è¡“ã‚’çŸ¥ã‚‹è€…ã¯ãŸã ä¸€äººâ€•â€•ã ãŒãã®äººç‰©ã¯å¿½ç„¶ã¨å§¿ã‚’æ¶ˆã—ã€æ‘ã¯ä¸æ€è­°ãªåŠ›ã§é–‰ã–ã•ã‚Œã¦ã—ã¾ã£ãŸã¨ã„ã†ã€‚\n\nã‚ãªãŸã¯ãƒ«ã‚·ã‚¢ã«å°ã‹ã‚Œã€æ‘ã«æ•£ã‚‰ã°ã‚‹æš—å·ã‚’è§£ãã“ã¨ã‚’æ±ºæ„ã™ã‚‹ã€‚\nã²ã¨ã¤è¬ã‚’è§£ããŸã³ã«ã€åœ°å›³ã®å°å°ãŒè§£ã‘ã€ä½•ã‹ã®â€œæ–­ç‰‡â€ãŒé›†ã¾ã£ã¦ã„ãã€‚\nã—ã‹ã—ã€ã™ã¹ã¦ã‚’é›†ã‚ã‚‰ã‚Œãªã‘ã‚Œã°â€•â€•æ‘ã¯æ°¸é ã«é™å¯‚ã«é–‰ã–ã•ã‚Œã‚‹ã ã‚ã†ã€‚\n';
const SLIDE_IMAGES = ['LuciaQR.png', 'NazoQR.png'];
const scenes = { intro:document.getElementById('intro'), story:document.getElementById('story'), slide:document.getElementById('slideScene') };
function showScene(key){ Object.values(scenes).forEach(s=>s.classList.remove('active')); scenes[key].classList.add('active'); if(key==='story') startTypewriterStory(); }
function startTypewriterStory(){ const textEl=document.getElementById('storyText'); const btn=document.getElementById('toSlideBtn'); textEl.innerHTML=''; btn.style.display='none'; const nodes=[]; for(const ch of STORY_TEXT){ if(ch==='\n'){ nodes.push(document.createElement('br')); } else { const sp=document.createElement('span'); sp.className='char'; sp.textContent=ch; nodes.push(sp);} } nodes.forEach(n=>textEl.appendChild(n)); let i=0; const timer=setInterval(()=>{ while(i<nodes.length && nodes[i].tagName==='BR'){i++;} if(i<nodes.length){ nodes[i].classList.add('show'); i++; } else { clearInterval(timer); btn.style.display='inline-block'; } },35); }
function runSlides(){ const img=document.getElementById('slideImg'); let index=0; function nextSlide(){ if(index>=SLIDE_IMAGES.length) return; img.classList.remove('slide'); void img.offsetWidth; img.onload=()=>{ img.classList.add('slide'); setTimeout(()=>{ index++; nextSlide(); },35000); }; img.src=SLIDE_IMAGES[index]; }
  nextSlide();
}

                     
const bgm=document.getElementById('bgm');
let soundConfigured = false;
document.getElementById('playPauseBtn').onclick=()=>{ if(bgm.paused) bgm.play(); else bgm.pause();};
document.getElementById('muteBtn').onclick=()=>{ bgm.muted=!bgm.muted;};
document.getElementById('enableSoundBtn').onclick = async () => {
  try { await bgm.play(); } catch (e) {}
  soundConfigured = true;
  document.getElementById('soundPrompt').style.display = 'none';
  showScene('intro');
};
document.getElementById('skipSoundBtn').onclick = () => {
  try { bgm.pause(); } catch(e) {}
  soundConfigured = true;
  document.getElementById('soundPrompt').style.display = 'none';
  showScene('intro');
};
document.getElementById('startAdventureBtn').onclick = () => {
  if (!soundConfigured) {
    document.getElementById('soundPrompt').style.display = 'flex';
  } else {
    showScene('story');
  }
};
document.getElementById('toSlideBtn').onclick=()=>{ showScene('slide'); runSlides(); };
</script>
</body>
</html>
